"use strict";angular.module("myApp.home",["ngRoute","firebase"]).config(["$routeProvider",function(e){e.when("/home",{templateUrl:"home/home.html",controller:"HomeCtrl"})}]).controller("HomeCtrl",["$scope","$location","CommonProp","$firebaseAuth",function(e,t,o,a){var n=new Firebase("https://event-manager-app.firebaseio.com/"),r=a(n),i={};e.login=i,e.user={},e.SignIn=function(a){a.preventDefault();var n=e.user.email,l=e.user.password;i.loading=!0,r.$authWithPassword({email:n,password:l}).then(function(e){console.log("Authentication successful"),i.loading=!1,o.setUser(e.password.email),t.path("/welcome")},function(e){i.loading=!1,console.log("Authentication failure")})}}]).directive("validateEmail",function(){var e=/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;return{require:"ngModel",restrict:"",link:function(t,o,a,n){n&&n.$validators.email&&(n.$validators.email=function(t){return n.$isEmpty(t)||e.test(t)})}}}).service("CommonProp",["$location","$firebaseAuth",function(e,t){var o="",a=new Firebase("https://event-manager-app.firebaseio.com/Events"),n=t(a);return{getUser:function(){return""===o&&(console.log(o),o=localStorage.getItem("userEmail")),o},setUser:function(e){localStorage.setItem("userEmail",e),o=e},logoutUser:function(){n.$unauth(),o="",localStorage.clear(),console.log("done logout"),e.path("/home")}}}]).directive("laddaLoading",[function(){return{link:function(e,t,o){var a=window.Ladda,n=a.create(t[0]);e.$watch(o.laddaLoading,function(e,t){e?n.start():n.stop()})}}}]).directive("validateEmail",function(){var e=/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;return{require:"ngModel",restrict:"",link:function(t,o,a,n){n&&n.$validators.email&&(n.$validators.email=function(t){return n.$isEmpty(t)||e.test(t)})}}});